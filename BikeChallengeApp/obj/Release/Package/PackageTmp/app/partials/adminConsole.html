<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

    <style>
        .userAttribute {
            font-weight:bold;
        }
        .cancelFilter {
            color:red;
        }

        div > label {color:gray}

        #orgBlock {
            margin-bottom:20px;
            border-radius:20px;
            background-color:#e9e9e9;
        }

            #orgBlock:hover {
                background-color: #f5f5f5;
            }
        
    </style>
    
</head>


<body>
    <div class="container">
        <div class="row">
            <div class="row col-md-8" style="float:left">


                <div ng-switch data-on="adminNav.switch" style="padding-top:50px">
                    <!-- Users Management Interface--> 
                    <div ng-switch-when="1">
                       

                        <fieldset>
                            <legend>
                                <span>ניהול רוכבים</span>
                            </legend>
                        </fieldset>
                        <div class="row">
                            <div class="col-md-4 pull-right" style="font-weight:bolder">
                                <label><strong style="color:black">סינון תוצאות</strong></label>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-3 pull-right">

                                <label>עיר מגורים</label>
                                <div class="form-control">
                                    <select ng-model="city"
                                            class="pull-right"
                                            ng-options="value for value in filterOptions[0].values"
                                            style="border:none" />
                                    <span class="glyphicon glyphicon-filter pull-left"
                                          ng-class="{'cancelFilter' : city}"
                                          ng-click="city=undefined"></span>
                                </div>
                            </div>

                            <div class="col-md-3 pull-right">
                                <label><strong>ארגון</strong></label>
                                <div class="form-control">
                                    <select ng-model="org"
                                            class="pull-right"
                                            ng-options="value for value in filterOptions[4].values"
                                            style="border:none" />
                                    <span class="glyphicon glyphicon-filter pull-left"
                                          ng-class="{'cancelFilter' : org}"
                                          ng-click="org=undefined"></span>
                                </div>
                            </div>

                            <div class="col-md-4 pull-right">
                                <label><strong>קבוצה</strong></label>
                                <div class="form-control">
                                    <select ng-model="group"
                                            class="pull-right"
                                            style="border:none"
                                            ng-options="value.GroupDes group by value.OrganizationDes  for value in filterOptions[1].values"></select>
                                    <span class="glyphicon glyphicon-filter pull-left"
                                          ng-class="{'cancelFilter' : group}"
                                          ng-click="group=undefined"></span>
                                </div>
                            </div>

                            <div class="col-md-2 pull-right">
                                <label><strong>מין הרוכב</strong></label>
                                <div class="form-control">
                                    <select ng-model="gender"
                                            class="pull-right"
                                            ng-options="value for value in filterOptions[2].values"
                                            style="border:none" />
                                    <span class="glyphicon glyphicon-filter pull-left"
                                          ng-class="{'cancelFilter' : gender}"
                                          ng-click="gender=undefined"></span>
                                </div>
                                
                            </div>
                        </div>
                    <br/>
                            <div class="row">
                                <div class="col-md-4 pull-right">
                                    <label><strong style="color:black">חיפוש משתמש</strong></label>
                                    <div class="form-control">
                                        <input class="pull-right" ng-model="query" style="border:none" />
                                        <span class="glyphicon glyphicon-search pull-left"></span>
                                    </div>
                                    
                                    <br />
                                </div>
                                
                                

                                <div data-accordion class="col-md-10 pull-right">
                                    <div class="row">
                                        <div class="col-md-4 pull-left" style="margin-bottom:10px">
                                            <i class="fa fa-file-excel-o fa-2x pull-left"
                                               style="color:green;"
                                               title="יצוא לקובץ EXCEL"
                                               ng-click="export2Excel(filteredUsers)"></i>

                                            <i class="fa fa-file-pdf-o fa-2x pull-left"
                                               style="color:red;"
                                               title="יצוא לקובץ PDF"
                                               ng-click="export2PDF(filteredUsers)"></i>
                                        </div>
                                    </div>
                                    
                                    <div data-accordion-group ng-repeat="user in filteredUsers = ( users | cityFilter:city | genderFilter:gender | orgFilter:org | groupFilter:group | filter:query | orderBy:'UserLname')" data-is-open="status1.open">
                                        
                                        <div data-accordion-heading>
                                            <span>{{user.UserLname}}</span>&nbsp;<span>{{user.UserFname}}</span>
                                            <i class="glyphicon" ng-class="{'glyphicon-chevron-down pull-left': status1.open, 'glyphicon-chevron-right pull-left': !status1.open}"></i>
                                        </div>

                                        <table class="table table-responsive table-condensed">
                                            <tr>
                                                <td>שם פרטי</td>
                                                <td class="userAttribute">{{user.UserFname}}</td>
                                                <td rowspan="12" align="center">
                                                    <img src="{{user.ImagePath}}" class="img-rounded img-responsive" style="max-height:200px;" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>שם משפחה</td>
                                                <td class="userAttribute">{{user.UserLname}}</td>

                                            </tr>
                                            <tr>
                                                <td>מין</td>
                                                <td class="userAttribute" ng-if="user.Gender=='M'">זכר</td>
                                                <td class="userAttribute" ng-if="user.Gender!='M'">נקבה</td>
                                            </tr>
                                            <tr>
                                                <td>כתובת מגורים</td>
                                                <td class="userAttribute">{{user.UserAddress}}</td>
                                            </tr>
                                            <tr>
                                                <td>עיר מגורים</td>
                                                <td class="userAttribute">{{user.RiderCity}}</td>
                                            </tr>
                                            <tr>
                                                <td>מספר טלפון</td>
                                                <td class="userAttribute pull-right"
                                                    style="direction: ltr;">
                                                    {{user.UserPhone | phonePattrenFilter}}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>כתובת דואר אלקטרוני</td>
                                                <td class="userAttribute">{{user.UserEmail}}</td>
                                            </tr>
                                            <tr>
                                                <td>תאריך לידה</td>
                                                <td class="userAttribute pull-right">
                                                    {{user.BirthDate | datePattrenFilter}}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>סוג אופניים</td>
                                                <td class="userAttribute">{{user.BicycleType}}</td>
                                            </tr>
                                            <tr>
                                                <td>ארגון</td>
                                                <td class="userAttribute">{{user.OrganizationDes}}</td>
                                            </tr>
                                            <tr>
                                                <td>קבוצה</td>
                                                <td class="userAttribute">{{user.GroupDes}}</td>
                                            </tr>
                                            <tr>
                                                <td>תאריך רישום</td>
                                                <td class="userAttribute">{{user.JoinDate| datePattrenFilter}}</td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </table>

                                        <button class="btn btn-default pull-left"
                                                ng-click="removeUser(user.UserDes)">
                                            <i class="glyphicon glyphicon-remove" style="color:red"></i>
                                            <span>מחיקת משתמש</span>
                                        </button>


                                    </div>
                                </div>

                            </div>    
                            </div>
                                         
                    <!-- Groups Management Interface-->
                    <div ng-switch-when="2">
                        
                        <fieldset>
                            <legend>ניהול קבוצות</legend>
                        </fieldset>
                        
                        <div class="row">
                            <div class="col-md-4 pull-right" style="font-weight:bolder">
                                <label><strong style="color:black">סינון תוצאות</strong></label>
                            </div>
                        </div>
                        <div class="col-md-3 pull-right" style="margin-bottom:20px;">
                            <label><strong>ארגון</strong></label>
                            <div class="form-control">
                                <select ng-model="orgGrpMgmt"
                                        class="pull-right"
                                        ng-options="value for value in filterOptions[4].values"
                                        style="border:none" />
                                <span class="glyphicon glyphicon-filter pull-left"
                                      ng-class="{'cancelFilter' : orgGrpMgmt}"
                                      ng-click="orgGrpMgmt=undefined"></span>
                            </div>
                        <hr />
                        </div>
                        
                        


                        <div id="orgBlock" class="col-md-10 pull-right" 
                             ng-repeat="org in organizationsHolder | groupsOrgFilter:orgGrpMgmt |orderBy:'OrganizationDes'"
                             data-spacer
                             style="border:solid 1px;">
                            <div>

                                <table class="table" style="table-layout: fixed; ">
                                    <tr>
                                        <td style="border-top: none"><span><strong style="font-size:20px">{{org.OrganizationDes}}</strong></span></td>
                                        <td style="width: 120px; border-top: none">
                                            <img src="{{org.OrganiztionImage}}" class="img-responsive img-rounded" />
                                        </td>
                                    </tr>
                                </table>

                            </div>


                            <div ng-if="org.OrganizationDes == group.OrganizationDes" data-accordion ng-repeat="group in filteredGroups = ( groupsHolder |  orderBy:'OrganizationDes')">
                                <div data-accordion-group data-is-open="statusGroup.open">
                                    <div data-accordion-heading>
                                        <span ng-click="undoDemote()">{{group.GroupDes}}</span>
                                        <i class="glyphicon" ng-class="{'glyphicon-chevron-down pull-left': statusGroup.open, 'glyphicon-chevron-right pull-left': !statusGroup.open}" ng-click="undoDemote()"></i>
                                    </div>

                                    <table class="table table-responsive table-condensed">
                                        <tr>
                                            <td>שם הקבוצה</td>
                                            <td class="userAttribute">{{group.GroupDes}}</td>

                                        </tr>
                                        <tr>
                                            <td>שם הארגון</td>
                                            <td class="userAttribute">{{group.OrganizationDes}}</td>

                                        </tr>
                                        <tr>
                                            <td>קפטן הקבוצה</td>
                                            <td class="userAttribute">{{group.DisplayName}}</td>
                                        </tr>
                                        <tr>
                                            <td>מספר רוכבים</td>
                                            <td class="userAttribute">{{group.GroupHeadCount}}</td>
                                        </tr>


                                        <tr ng-if="replaceCaptainFlag">
                                            <td><strong>בחר קפטן חדש</strong></td>
                                            <td>
                                                <select ng-model="newCaptain"
                                                        class="pull-right"
                                                        ng-options="newCaptain.UserDisplayName for newCaptain  in riderPerGroup" />
                                                &nbsp;<i class="glyphicon glyphicon-save"
                                                         ng-click="saveNewCaptain(group.Captain_UserName,newCaptain)"
                                                         title="עדכן"
                                                         style="color:green"></i>
                                                &nbsp;<i class="glyphicon glyphicon-remove-circle"
                                                         ng-click="undoDemote()"
                                                         title="בטל"
                                                         style="color:red"></i>
                                            </td>
                                        </tr>

                                    </table>

                                    <button class="btn btn-default pull-left"
                                            ng-click="removeGroup(group.GroupName, group.OrganizationName)">
                                        <i class="glyphicon glyphicon-remove" style="color:red"></i>
                                        <span>מחיקת קבוצה</span>
                                    </button>
                                    <button class="btn btn-default pull-left"
                                            ng-click="demoteCaptain(group.GroupName, group.OrganizationName)">
                                        <i class="glyphicon glyphicon-flag" style="color:blue"></i>
                                        <span>החלפת קפטן</span>
                                    </button>

                                </div>
                            </div>
                            <hr />

                        </div>




                    </div>

                    <!-- Organizations Management Interface-->
                    <div ng-switch-when="3">
                        <fieldset>
                            <legend>ניהול ארגונים</legend>
                        </fieldset>
                        
                        
                        <div class="row">
                            <div class="col-md-4 pull-right" style="font-weight:bolder">
                                <label><strong style="color:black">סינון תוצאות</strong></label>
                            </div>
                        </div>
                        
                        <div class="col-md-4 pull-right">
                            <label>חיפוש ארגון</label>
                            <div class="form-control">
                                <input class="pull-right" ng-model="orgQuery" style="border:none" />
                                <span class="glyphicon glyphicon-search pull-left"></span>
                            </div>

                            <br />
                        </div>
                            
                            <div class="row">
                                <div class="col-md-3 pull-right">
                                    <label>עיר מגורים</label>
                                    <div class="form-control">
                                        <select ng-model="orgCity"
                                                class="pull-right"
                                                ng-options="value for value in filterOptions[0].values"
                                                style="border:none" />
                                        <span class="glyphicon glyphicon-filter pull-left"
                                              ng-class="{'cancelFilter' : orgCity}"
                                              ng-click="orgCity=undefined"></span>
                                    </div>
                                </div>
                            </div>

                                <hr />

                        <div data-accordion class="col-md-10 pull-right">
                            <div class="row" style="margin-bottom:10px">
                                <div class="col-md-4 pull-left">
                                    <i class="fa fa-file-excel-o fa-2x pull-left"
                                       style="color:green;"
                                       title="יצוא לקובץ EXCEL"
                                       ng-click="export2Excel(filteredOrgs)"></i>

                                    <i class="fa fa-file-pdf-o fa-2x pull-left"
                                       style="color:red;"
                                       title="יצוא לקובץ PDF"
                                       ng-click="export2PDF(filteredOrgs)"></i>
                                    <br />
                                </div>
                                <br />
                            </div>
                            <div data-accordion-group ng-repeat="organization in filteredOrgs = ( organizationsHolder | orgCityFilter:orgCity | filter:orgQuery |  orderBy:'OrganizationDes')" data-is-open="status1.open">
                                 
                                <div data-accordion-heading>
                                    <span>{{organization.OrganizationDes}}</span>&nbsp;,&nbsp;<span>{{organization.CityName}}</span>
                                    <i class="glyphicon" ng-class="{'glyphicon-chevron-down pull-left': status1.open, 'glyphicon-chevron-right pull-left': !status1.open}"></i>
                                </div>

                                <table class="table table-responsive table-condensed">
                                    <tr>
                                        <td>שם הארגון</td>
                                        <td class="userAttribute">{{organization.OrganizationDes}}</td>
                                        <td rowspan="12" align="center">
                                            <img src="{{organization.OrganiztionImage}}" class="img-rounded img-responsive" style="max-height:200px;" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>עיר</td>
                                        <td class="userAttribute">{{organization.CityName}}</td>

                                    </tr>
                                    <tr>
                                        <td>סוג הארגון</td>
                                        <td class="userAttribute">{{organization.OrganizationType}}</td>
                                    </tr>
                                    <tr>
                                        <td>מספר קבוצות רשומות</td>
                                        <td class="userAttribute">{{organization.OrgGroupCount}}</td>
                                    </tr>
                                    <tr>
                                        <td>מספר רוכבים רשומים</td>
                                        <td class="userAttribute">{{organization.OrgHeadCount}}</td>
                                    </tr>



                                </table>

                                <button class="btn btn-default pull-left"
                                        ng-click="removeOrganization(organization.OrganizationName)">
                                    <i class="glyphicon glyphicon-remove" style="color:red"></i>
                                    <span>מחיקת ארגון</span>
                                </button>


                            </div>
                            </div>
                            </div>

                    

                    <div ng-switch-when="4">
                        <fieldset>
                            <legend>סיכום תחרות</legend>
                        </fieldset>

                    <p><i class="glyphicon glyphicon-asterisk" style="color:green"></i>התחרויות המוצגות הינן תחרויות פתוחות, יש להגריל מנצחים ולשמור את השינויים על מנת לפרסם את תוצאות ההגרלה לכלל המשתתפים</p>
                        <table class="table table-condensed"
                               ng-repeat="challenge in openChallengesHolder">

                            <thead>
                                <tr>
                                    <td colspan="2" style="background-color:#EBEBEB" align="center"><strong> חודש התחרות</strong></td>
                                </tr>
                                <tr>
                                    <td colspan="2" style="background-color:#EBEBEB" align="center"><strong>{{challenge.CompetitionDate | displayHebrewDate}}</strong></td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ארגון מנצח</td>
                                    <td><strong>{{challenge.OrgWin | displayNull}} </strong> </td>
                                </tr>
                                <tr>
                                    <td>קבוצה מנצחת</td>
                                    <td><strong>{{challenge.GrpWin | displayNull}} , {{challenge.GrpWinOrgName}}</strong> </td>
                                </tr>
                                <tr>
                                    <td>רוכב מנצח (קטגוריית פלטיניום)</td>
                                    <td><strong>{{challenge.PlatinumUser | displayNull}} </strong> </td>
                                </tr>
                                <tr>
                                    <td>רוכב מנצח (קטגוריית זהב)</td>
                                    <td><strong>{{challenge.GoldUser | displayNull}} </strong> </td>
                                </tr>
                                <tr>
                                    <td>רוכב מנצח (קטגוריית כסף)</td>
                                    <td><strong>{{challenge.SilverUser | displayNull}}</strong> </td>
                                </tr>
                                <tr>
                                    <td>רוכב מנצח (קטגוריית ארד)</td>
                                    <td><strong>{{challenge.BronzeUser | displayNull}}</strong> </td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="2">
                                        <button class="btn btn-success" ng-click="shuffle(challenge.CompetitionDate,challenge.$$hashKey)">הגרל מנצחים</button>
                                        <button class="btn btn-primary  pull-left" ng-click="saveChallenge(challenge.CompetitionDate,challenge.$$hashKey)">שמור נתונים</button>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <div ng-switch-when="5">
                        <fieldset>
                            <legend>הפקת דוחות</legend>
                        </fieldset>

                        <div class="row">
                            <div class="col-md-4 pull-right" style="font-weight:bolder">
                                <label><strong style="color:black">סינון תוצאות</strong></label>
                            </div>
                        </div>

                        <div class="row">
                           <div class="col-md-3 pull-right">
                                <label><strong>ארגון</strong></label>
                                <div class="form-control">
                                    <select ng-model="org"
                                            class="pull-right"
                                            ng-options="value for value in filterOptions[4].values"
                                            style="border:none" />
                                    <span class="glyphicon glyphicon-filter pull-left"
                                          ng-class="{'cancelFilter' : org}"
                                          ng-click="org=undefined"></span>
                                </div>
                            </div>

                            <div class="col-md-4 pull-right">
                                <label><strong>קבוצה</strong></label>
                                <div class="form-control">
                                    <select ng-model="group"
                                            class="pull-right"
                                            style="border:none"
                                            ng-options="value.GroupDes group by value.OrganizationDes  for value in filterOptions[1].values"></select>
                                    <span class="glyphicon glyphicon-filter pull-left"
                                          ng-class="{'cancelFilter' : group}"
                                          ng-click="group=undefined"></span>
                                </div>
                            </div>
                            
                           
                                <div class="col-md-4 pull-left" style="margin-bottom:10px">
                                    <i class="fa fa-file-excel-o fa-2x pull-left"
                                       style="color:green;"
                                       title="יצוא לקובץ EXCEL"
                                       ng-click="export2Excel(filteredRides)"></i>

                                    <i class="fa fa-file-pdf-o fa-2x pull-left"
                                       style="color:red;"
                                       title="יצוא לקובץ PDF"
                                       ng-click="export2PDF(filteredRides)"></i>
                                </div>
                            
                            
                            
                        </div>

                        

                        <br />
                        <table class="table table-responsive table-hover ">
                            <thead >
                                <tr>
                                    <td></td>
                                    <td><a ng-click="sortVar = 'UserDisplayName'">שם משתמש</a></td>
                                    <td><a ng-click="sortVar = 'GroupDes'">קבוצה</a></td>
                                    <td><a ng-click="sortVar = 'OrganizationDes'">ארגון</a></td>
                                    <td><a ng-click="sortVar = 'RideLength'">אורך רכיבה</a></td>
                                    <td><a ng-click="sortVar = 'RideDate'">תאריך</a></td>
                                </tr>
                            </thead>

                            <tbody ng-repeat="ride in filteredRides = (allRidesHolder | orgFilter:org | groupFilter:group| orderBy:sortVar)">
                                <tr>
                                    <td>{{$index+1}}</td>
                                    <td>{{ride.UserDisplayName}}</td>
                                    <td>{{ride.GroupDes}}</td>
                                    <td>{{ride.OrganizationDes}}</td>
                                    <td>{{ride.RideLength}}</td>
                                    <td>{{ride.RideDate | date:'dd-MM-yyyy'}}</td>
                                </tr>
                            </tbody>

                        </table>

                    </div>

                    <div ng-switch-when="6">
                        <fieldset>
                            <legend>משלוח הודעות</legend>
                        </fieldset>

                        <p>משלוח הודעה באמצעות דואר אלקטרוני לכלל המשתמשים הרשומים באתר</p>

                        <form name="sendMail" ng-submit="publish(sendMail)">
                           
                            <div class="form-group">
                                <input name="subject"
                                       type="text"
                                       class="form-control"
                                       ng-model="subject"
                                       placeholder="נושא"
                                       data-tooltip="נושא"
                                       data-tooltip-trigger="focus"
                                       data-tooltip-placement="right" />

                            </div>

                            <div class="form-group">
                                <textarea class="form-control"
                                          data-tooltip="תוכן"
                                          name="content"
                                          cols="90"
                                          rows="5"
                                          ng-model="content"
                                          placeholder="תוכן ההודעה"></textarea>

                            </div>
                            <button type="submit" class="btn btn-primary" ng-disabled="sendMail.$invalid">שלח!</button>
                        </form>

                    </div>
                    
                    
                    
                    <!-- BikeChallenge Events Management Interface-->
                    <!-- Modal windows templates-->
                    <script type="text/ng-template" id="newEventModalContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">יצירת אירוע חדש</h3>
                        </div>
                        <div class="modal-body">
                           
                            <form name="newEvent" ng-submit="save(newEvent)" novalidate>

                                <div class="form-group">
                                    <input name="name"
                                           type="text"
                                           class="form-control"
                                           ng-model="eventName"
                                           placeholder="שם האירוע"
                                           data-tooltip="שם האירוע"
                                           data-tooltip-trigger="focus"
                                           data-tooltip-placement="right"
                                           required />
                                </div>

                                <div class="form-group">
                                    <label><small>תאריך</small></label>
                                    <input name="date"
                                           type="date"
                                           class="form-control"
                                           ng-model="date"
                                           placeholder="תאריך"
                                           data-tooltip="תאריך"
                                           data-tooltip-trigger="focus"
                                           data-tooltip-placement="right"
                                           required />
                                </div>

                                <div class="form-group">
                                    <label><small>שעה</small></label>
                                    <input name="time"
                                           type="time"
                                           class="form-control"
                                           ng-model="time"
                                           placeholder="שעה"
                                           data-tooltip="שעה"
                                           data-tooltip-trigger="focus"
                                           data-tooltip-placement="right"
                                           required />
                                </div>

                                <div class="form-group">
                                    <input name="type"
                                           type="text"
                                           class="form-control"
                                           ng-model="type"
                                           placeholder="סוג האירוע"
                                           data-tooltip="סוג האירוע"
                                           data-tooltip-trigger="focus"
                                           data-tooltip-placement="right"
                                           required />
                                </div>


                                <div class="form-group">
                                    <input name="address"
                                           type="text"
                                           class="form-control"
                                           ng-model="address"
                                           placeholder="כתובת"
                                           data-tooltip="כתובת"
                                           data-tooltip-trigger="focus"
                                           data-tooltip-placement="right"
                                           required />
                                </div>

                                <div class="form-group">
                                    <label><small>עיר מגורים</small></label>
                                    <select name="city"
                                            id="citySelect"
                                            class="form-control"
                                            ng-model="city"
                                            ng-options="value for value in filterOptions[0].values"
                                            data-tooltip="עיר"
                                            data-tooltip-trigger="focus"
                                            data-tooltip-placement="right"
                                            required></select>
                                </div>

                                <div class="form-group">
                                    <textarea name="description"
                                              rows="5"
                                              class="form-control"
                                              ng-model="description"
                                              placeholder="תיאור האירוע"
                                              data-tooltip="תיאור האירוע"
                                              data-tooltip-trigger="focus"
                                              data-tooltip-placement="right"
                                              required></textarea>
                                </div>
                                <button type="submit" ng-disabled="newEvent.$invalid" class="btn btn-primary">שמור </button>
                                <button class="btn btn-danger" ng-click="cancel()">ביטול</button>
                            </form>
                            
                            
                        </div>
                        
                            
                            
                            
                            
                        
                    </script>
                   
                    <script type="text/ng-template" id="editEventModalContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">עריכת אירוע</h3>
                        </div>
                        <div class="modal-body">

                            <form name="newEvent" ng-submit="saveChanges(newEvent)" novalidate>

                                <div class="form-group">
                                    <input name="name"
                                           type="text"
                                           class="form-control"
                                           ng-model="targetEvent.EventDes"
                                           placeholder="שם האירוע"
                                           data-tooltip="שם האירוע"
                                           data-tooltip-trigger="focus"
                                           data-tooltip-placement="right"
                                           required />
                                </div>

                                <div class="form-group">
                                    <label><small>תאריך</small></label>
                                    <input name="date"
                                           type="date"
                                           class="form-control"
                                           ng-model="targetEvent.EventDate"
                                           placeholder="תאריך"
                                           data-tooltip="תאריך"
                                           data-tooltip-trigger="focus"
                                           data-tooltip-placement="right"
                                           required />
                                </div>

                                <div class="form-group">
                                    <label><small>שעה</small></label>
                                    <input name="time"
                                           type="time"
                                           class="form-control"
                                           ng-model="targetEvent.EventTime"
                                           placeholder="שעה"
                                           data-tooltip="שעה"
                                           data-tooltip-trigger="focus"
                                           data-tooltip-placement="right"
                                           required />
                                </div>

                                <div class="form-group">
                                    <input name="type"
                                           type="text"
                                           class="form-control"
                                           ng-model="targetEvent.EventType"
                                           placeholder="סוג האירוע"
                                           data-tooltip="סוג האירוע"
                                           data-tooltip-trigger="focus"
                                           data-tooltip-placement="right"
                                           required />
                                </div>


                                <div class="form-group">
                                    <input name="address"
                                           type="text"
                                           class="form-control"
                                           ng-model="targetEvent.EventAddress"
                                           placeholder="כתובת"
                                           data-tooltip="כתובת"
                                           data-tooltip-trigger="focus"
                                           data-tooltip-placement="right"
                                           required />
                                </div>

                                <div class="form-group">
                                    <label><small>עיר מגורים</small></label>
                                    <select name="city"
                                            id="citySelect"
                                            class="form-control"
                                            ng-model="targetEvent.CityName"
                                            ng-options="value for value in filterOptions[0].values"
                                            data-tooltip="עיר"
                                            data-tooltip-trigger="focus"
                                            data-tooltip-placement="right"
                                            required></select>
                                </div>

                                <div class="form-group">
                                    <textarea name="description"
                                              rows="5"
                                              class="form-control"
                                              ng-model="targetEvent.EventDetails"
                                              placeholder="תיאור האירוע"
                                              data-tooltip="תיאור האירוע"
                                              data-tooltip-trigger="focus"
                                              data-tooltip-placement="right"
                                              required></textarea>
                                </div>
                                <button type="submit" ng-disabled="newEvent.$invalid" class="btn btn-primary">עדכן</button>
                                <button class="btn btn-danger" ng-click="cancel()">ביטול</button>
                            </form>


                        </div>






                    </script>
                    
                    <script type="text/ng-template" id="registeredUserModalContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">משתמשים רשומים לאירוע</h3>
                        </div>
                        <div class="modal-body">

                            <table class="table table-bordered table-hover"> 
                                <thead>
                                    <tr class="active">
                                        <td>שם</td>
                                        <td>עיר</td>
                                        <td>קבוצה</td>
                                        <td>ארגון</td>
                                        <td>טלפון</td>
                                        <td>כתובת דואר אלקטרוני</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="user in userPool | orderBy:'UserLname'">
                                        <td>{{user.UserDisplayName}}</td>
                                        <td>{{user.RiderCity}}</td>
                                        <td>{{user.GroupDes}}</td>
                                        <td>{{user.OrganizationDes}}</td>
                                        <td  
                                            style="direction: ltr;">{{user.UserPhone | phonePattrenFilter}}</td>
                                        <td>{{user.UserEmail}}</td>
                                    </tr>
                                </tbody>
                            </table>
                            <hr />
                            <table class="table">
                                <tr class="active">
                                    <td>מספר רוכבים כולל</td>
                                    <td><strong>{{userPool.length}}</strong> </td>
                                </tr>
                            </table>

                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default pull-left"
                                    ng-click="">
                                <i class="glyphicon glyphicon-file" style="color:green"></i>
                                <span>יצא רשימה לקובץ</span>
                            </button>
                        </div>

                    </script>
                    
                    <div ng-switch-when="7">
                        <fieldset>
                            <legend>ניהול אירועים</legend>
                        </fieldset>
                        
                        <button class="btn btn-default pull-right"
                                ng-click="createNewEvent()">
                            <i class="glyphicon glyphicon-asterisk" style="color:green"></i>
                            <span>יצירת אירוע חדש</span>
                        </button>
                        
                        <br />
                        <div class="row">
                            <hr />
                            <div data-accordion class="col-md-10 pull-right">
                                <div class="row">
                                    <div class="col-md-4 pull-left" style="margin-bottom:10px">
                                        <i class="fa fa-file-excel-o fa-2x pull-left"
                                           style="color:green;"
                                           title="יצוא לקובץ EXCEL"
                                           ng-click="export2Excel(filteredEvents)"></i>

                                        <i class="fa fa-file-pdf-o fa-2x pull-left"
                                           style="color:red;"
                                           title="יצוא לקובץ PDF"
                                           ng-click="export2PDF(filteredEvents)"></i>
                                    </div>
                                </div>
                                <div data-accordion-group ng-repeat="event in filteredEvents = ( eventsHolder | orderBy:'EventDate')" data-is-open="status1.open">
                                    <div data-accordion-heading>
                                        <span>{{event.EventDate | date:'dd-MM-yyyy'}}</span>&nbsp;,&nbsp;<span><strong>{{event.EventDes}}</strong></span>,&nbsp;<span>{{event.CityName}}</span>
                                        <i class="glyphicon" ng-class="{'glyphicon-chevron-down pull-left': status1.open, 'glyphicon-chevron-right pull-left': !status1.open}"></i>
                                    </div>
                                    
                                    <table class="table table-responsive table-condensed">
                                        <tr>
                                            <td>שם האירוע</td>
                                            <td class="userAttribute">{{event.EventDes}}</td>
                                        </tr>
                                        <tr>
                                            <td>סוג האירוע</td>
                                            <td class="userAttribute">{{event.EventType}}</td>
                                        </tr>
                                        
                                        <tr>
                                            <td>עיר</td>
                                            <td class="userAttribute">{{event.CityName}}</td>

                                        </tr>
                                        <tr>
                                            <td>כתובת</td>
                                            <td class="userAttribute">{{event.EventAddress}}</td>

                                        </tr>
                                        <tr>
                                            <td>תאריך</td>
                                            <td class="userAttribute">{{event.EventDate | date:'dd-MM-yyyy'}}</td>
                                        </tr>
                                        <tr>
                                            <td>שעה</td>
                                            <td class="userAttribute">{{event.EventTime}}</td>
                                        </tr>
                                        <tr>
                                            <td>תוכן האירוע</td>
                                            <td class="userAttribute">{{event.EventDetails}}</td>
                                        </tr>
                                        <tr>
                                            <td>מס' רוכבים רשומים</td>
                                            <td class="userAttribute"><a ng-click="displayUsersPerEvent(event.EventName)">{{event.NumOfRidersInEvent}}</a></td>
                                        </tr>
                                        <!--<tr>
                                            <td>סטטוס</td>
                                            <td class="userAttribute">{{event.EventStatus}}</td>
                                        </tr>-->



                                    </table>

                                    <button class="btn btn-default pull-left"
                                            ng-click="removeEvent(event.EventName)">
                                        <i class="glyphicon glyphicon-remove" style="color:red"></i>
                                        <span>מחיקת אירוע</span>
                                    </button>
                                    <button class="btn btn-default pull-left"
                                            ng-click="editEvent(event)">
                                        <i class="glyphicon glyphicon-pencil" style="color:black"></i>
                                        <span>עריכת אירוע</span>
                                    </button>


                                </div>
                            </div>

                        </div>                    
                        
                    
                    
                    </div>
                    
                    <div ng-switch-when="8">
                        <fieldset>
                            <legend>
                                יצירת ארגון חדש
                            </legend>
                        </fieldset>
                        
                        <form name="newOrganization" ng-submit="createNewOrg(newOrganization)">
                            <div class="form-group" ng-class="{ 'has-error' : newOrganization.OrganizationName.$invalid && newOrganization.OrganizationName.$dirty , 'has-success' : newOrganization.OrganizationName.$valid }">
                                <label><strong>שם הארגון</strong></label>
                                <input type="text"
                                       class="form-control"
                                       name="OrganizationName"
                                       ng-model="OrganizationName"
                                       data-organization-validate
                                       placeholder="שם הארגון"
                                       data-tooltip="שם הארגון"
                                       data-tooltip-trigger="focus"
                                       data-tooltip-placement="right"
                                       required />
                                <p ng-show="newOrganization.OrganizationName.$error.unique" class="help-block">שם הארגון המבוקש תפוס</p>
                            </div>
                            <div class="form-group">
                                <label><small>עיר מגורים</small></label>
                                <select name="city"
                                        id="citySelect"
                                        class="form-control"
                                        ng-model="city"
                                        ng-options="value for value in filterOptions[0].values"
                                        data-tooltip="עיר"
                                        data-tooltip-trigger="focus"
                                        data-tooltip-placement="right"
                                        required></select>
                            </div>
                            <div class="form-group">
                                <label><strong>סוג הארגון</strong></label>
                                <input type="text"
                                       class="form-control"
                                       name="OrganizationType"
                                       ng-model="OrganizationType"
                                       placeholder="אופי הארגון (תעשייה, חברת תוכנה, מכללה, וכו'...')"
                                       data-tooltip="סוג הארגון"
                                       data-tooltip-trigger="focus"
                                       data-tooltip-placement="right"
                                       required />
                            </div>
                            <div class="form-group"
                                 ng-if="(newOrganization.OrganizationName.$valid)&&(newOrganization.OrganizationName.$dirty)">
                                <label><strong>לוגו הארגון</strong></label>
                                <input type="file"
                                       class="form-control"
                                       ng-file-select="onFileSelectOrg($files,newOrganization.OrganizationName.$viewValue)"
                                       ng-model="newOrganization.imagePath"
                                       placeholder="תמונה" /><br />
                            </div>

                            <button type="button"
                                    class="btn btn-default"
                                    ng-click="adminNav.switch=3">
                                ביטול
                            </button>
                            <button type="submit"
                                    class="btn btn-primary"
                                    ng-disabled="newOrganization.$invalid">
                                שמור
                            </button>
                        </form>
                        
                       
                        
                    </div>

                    <div ng-switch-when="9">
                        <fieldset>
                            <legend>
                                יצירת קבוצה חדש
                            </legend>
                        </fieldset>

                        <form name="newGroup" ng-submit="createNewGroup(newGroup)">
                            <div class="form-group">
                                <label><strong>שם הקבוצה</strong></label>
                                <input type="text"
                                       class="form-control"
                                       name="GroupName"
                                       ng-model="GroupName"
                                       placeholder="שם הקבוצה"
                                       data-tooltip="שם הקבוצה"
                                       data-tooltip-trigger="focus"
                                       data-tooltip-placement="right"
                                       required />
                            </div>
                            <div class="form-group">
                                <label><strong>שם הארגון</strong></label>
                                <select name="organizationName"
                                        id="orgSelect"
                                        class="form-control"
                                        ng-model="organizationName"
                                        ng-options="value for value in filterOptions[4].values"
                                        data-tooltip="ארגון"
                                        data-tooltip-trigger="focus"
                                        data-tooltip-placement="right"
                                        required></select>
                            </div>
                            

                            <button type="button"
                                    class="btn btn-default"
                                    ng-click="adminNav.switch=2">
                                ביטול
                            </button>
                            <button type="submit"
                                    class="btn btn-primary"
                                    ng-disabled="newGroup.$invalid">
                                שמור
                            </button>
                        </form>



                    </div>

                </div>
            </div>
            <div class="row col-md-1"></div>
            <div class="row col-md-3" style="padding-top:20px">
                      
                        <div class="row col-md-12">
                            
                            
                            <hr />
                            <div class="row scroll-down-text" ng-click="adminNav.switch=1">
                                <strong class="pull-right">ניהול רוכבים</strong>
                                <div class="glyphicon glyphicon-chevron-left pull-left scroll-down"></div>
                            </div>


                            <hr />
                            <div class="row scroll-down-text" ng-click="adminNav.switch=2">
                                <strong class="pull-right">ניהול קבוצות</strong>
                                <div class="glyphicon glyphicon-chevron-left pull-left scroll-down"></div>
                            </div>
                            <div class="row scroll-down-text" ng-if="(adminNav.switch==2)||(adminNav.switch==9)">
                                <br />
                                <p class="pull-right"
                                   ng-click="adminNav.switch=9">יצירת קבוצה חדשה</p>
                            </div>

                            <hr />
                            <div class="row scroll-down-text" ng-click="adminNav.switch=3">
                                <strong class="pull-right">ניהול ארגונים</strong>
                                <div class="glyphicon glyphicon-chevron-left pull-left scroll-down"></div>
                            </div>
                            <div class="row scroll-down-text" ng-if="(adminNav.switch==3)||(adminNav.switch==8)">
                                <br />
                                <p class="pull-right"
                                   ng-click="adminNav.switch=8">יצירת ארגון חדש</p>
                            </div>

                            <hr />
                            <div class="row scroll-down-text" ng-click="adminNav.switch=7">
                                <strong class="pull-right">ניהול אירועים</strong>
                                <div class="glyphicon glyphicon-chevron-left pull-left scroll-down"></div>
                            </div>

                            <hr />
                            <div class="row scroll-down-text" ng-click="adminNav.switch=4">
                                <strong class="pull-right">סיכום תחרויות</strong>
                                <div class="glyphicon glyphicon-chevron-left pull-left scroll-down"></div>
                            </div>


                            <hr />
                            <div class="row scroll-down-text" ng-click="adminNav.switch=5">
                                <strong class="pull-right">דוחות</strong>
                                <div class="glyphicon glyphicon-chevron-left pull-left scroll-down"></div>
                            </div>


                            <hr />
                            <div class="row scroll-down-text" ng-click="adminNav.switch=6">
                                <strong class="pull-right">משלוח הודעות</strong>
                                <div class="glyphicon glyphicon-chevron-left pull-left scroll-down"></div>
                            </div>
                            <hr />

                        </div>
                    </div>
        </div>
    </div>
</body>
</html>
